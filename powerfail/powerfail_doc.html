<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 4.4.7.2 (Linux)"/>
	<meta name="author" content="David Gesswein"/>
	<meta name="created" content="2013-12-28T10:05:51"/>
	<meta name="changed" content="2021-08-21T08:39:05.208016212"/>
	<style type="text/css">
		@page { margin: 0.79in }
		p { margin-bottom: 0.08in }
	</style>
</head>
<body lang="en-US" dir="ltr">
<p style="margin-bottom: 0in">powerfail monitors the input 12V to the
MFM reader/emulator board and shuts down the BeagleBone when power is
lost.</p>
<p style="margin-bottom: 0in"><br/>

</p>
<p style="margin-bottom: 0in">--powercmd -p 'command and arguments'</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">The command to
execute when power is lost.</p>
<p style="margin-bottom: 0in">--command -c 'command and arguments'</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">The command to
execute when powerfail starts. This program is sent a SIGINT when
power is lost. The powercmd is sent after this program exits.</p>
<p style="margin-bottom: 0in">--threshold  -t #</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">When the input
power drops below this voltage the power down actions will start.
Default is 11.5 volts.</p>
<p style="margin-bottom: 0in">--wait  -w #</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">The input power
must be below the threshold for the specified number of seconds
before the power down actions will start. Default is .1 seconds.</p>
<p style="margin-bottom: 0in">--scale  -s #</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">The resistor
divider scale value used to convert the A/D reading to voltage.
Should be r16 / (r16 + r15). Default is 0.1253.</p>
<p style="margin-bottom: 0in">--debug -d</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">Print debugging and
status information.</p>
<p style="margin-bottom: 0in">--version -v</p>
<p style="margin-left: 0.5in; margin-bottom: 0in">Print program
version number.</p>
<p style="margin-bottom: 0in"><br/>

</p>
<p style="margin-bottom: 0in">Long options can be abbreviated to the
shortest unique name. Long option values can't have spaces.</p>
<p style="margin-bottom: 0in"><br/>

</p>
<p style="margin-bottom: 0in"># is a floating point number. 
</p>
<p style="margin-bottom: 0in"> 
</p>
<p style="margin-bottom: 0in">Example if running from emu directory:</p>
<p style="margin-bottom: 0in">   ../powerfail/powerfail --powercmd
'halt -f' --command './mfm_emu --drive 1 --file disk_file'</p>
<p style="margin-bottom: 0in"><br/>

</p>
<p style="margin-bottom: 0in; font-style: normal">If you have the
extra chip installed to activate the power button when power returns
the recommended powercmd is poweroff otherwise it is halt. For Debian
it is recommended to use the -f flag to to poweroff or halt.</p>
</body>
</html>